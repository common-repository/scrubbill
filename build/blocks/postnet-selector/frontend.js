(()=>{"use strict";const e=window.wp.element,t=window.wp.data,s=window.wp.components,o=window.wp.i18n,a=window.lodash,l=window.ReactJSXRuntime,c=JSON.parse('{"apiVersion":2,"name":"scrubbill/postnet-selector-block","version":"1.0","title":"PostNet Branch Selector","category":"woocommerce","description":"Adds a drop down selector for a user to choose a PostNet branch.","supports":{"html":false,"align":false,"multiple":false,"reusable":false},"parent":["woocommerce/checkout-shipping-methods-block"],"attributes":{"lock":{"type":"object","default":{"remove":true,"move":true}}},"textdomain":"scrubbill","editorScript":"file:./index.js"}'),{registerCheckoutBlock:r}=wc.blocksCheckout;r({metadata:c,component:({checkoutExtensionData:c,cart:r})=>{const{setExtensionData:n}=c,i=(0,e.useCallback)((0,a.debounce)(((e,t,s)=>{n(e,t,s)}),1e3),[n]),d="postnet-selector",{setValidationErrors:p,clearValidationError:u}=(0,t.useDispatch)("wc/store/validation"),h=(0,t.useSelect)((e=>e("wc/store/validation").getValidationError(d))),w=()=>null!=r.shippingRates[0]&&null!=r.shippingRates[0].shipping_rates.find((e=>1==e.selected&&"POSTNET"==e.rate_id)),[b,m]=(0,e.useState)(!1),[k,S]=(0,e.useState)(0),g=(0,t.useSelect)((e=>e("wc/store/checkout")));return(0,e.useEffect)((()=>{i("postnet-selector","branchId",k),0==k&&w()?p({[d]:{message:(0,o.__)("Select a PostNet","scrubbill"),hidden:!0}}):h&&u(d)}),[n,k,h,d,w]),w()&&(0,l.jsxs)("div",{className:"postnet-selector-wrapper",style:{display:"block"},children:[(0,l.jsx)("h2",{children:(0,o.__)("PostNet Branch","scrubbill")}),(0,l.jsx)(s.SelectControl,{options:[{label:(0,o.__)("Select a PostNet","scrubbill"),value:0},...wcSettings["postnet-selector_data"].postnetBranches.map((e=>({label:e.name,value:e.id})))],onChange:e=>{(e=>{let t=0;null!=e&&""!=e&&(t=e),S(t)})(e),m(!0)}}),(0==k&&g.hasError()||!h?.hidden||b)&&(0,l.jsx)("div",{className:"wc-block-components-validation-error",children:h?.message})]})}})})();